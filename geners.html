<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genres • Book-Nest</title>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ms+Madi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: whitesmoke;
            font-family: Arial, sans-serif;
        }

        ul {
            list-style: none;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .material-symbols-outlined {
            font-size: 25px;
            font-weight: 700;
            padding: 5px;
            cursor: pointer;
            margin: 6px;
        }

        nav {
            display: flex;
            height: 55px;
            align-items: center;
            box-shadow: 2px 1px 3px rgba(0, 0, 0, 0.5);
            justify-content: space-between;
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: white;
        }

        h1 {
            font-size: 40px;
        }

        .logo {
            font-size: 30px;
            font-weight: 900;
            font-family: 'Permanent Marker', cursive;
            margin-right: 20px;
        }

        .logo a,
        .logo a:visited {
            color: black;
        }

        .navbar {
            width: 85vw;
            align-items: center;
            justify-content: center;
            display: flex;
        }

        .title {
            font-size: 30px;
            font-style: italic;
            font-family: 'Ms Madi', cursive;
            font-weight: 900;
            margin-bottom: -10px;
        }

        .actions {
            display: flex;
            align-items: center;
        }

        main {
            /* max-width: 1000px; */
            margin: 20px auto;
            padding: 0 16px;
            margin-top: 80px;
        }

        /* Heading */
        h2 {
            font-family: 'Ms Madi', cursive;
            font-size: 44px;
            margin: 8px 0 12px 0;
            letter-spacing: 0.3px;
        }

        /* Layout */
        .container {
            display: flex;
            gap: 18px;
            align-items: flex-start;
        }

        /* Sidebar */
        #generslist {
            position: sticky;
            top: 78px;
            width: 260px !important;
            max-height: calc(100vh - 110px);
            overflow-y: auto;
            border-radius: 12px;
            background: #f9f9f9;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            padding: 10px;
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE/Edge */
        }

        #generslist::-webkit-scrollbar {
            display: none;
        }

        .genreitem {
            padding: 10px 14px;
            margin: 6px 0;
            background: #ffffff;
            color: #333;
            font-weight: 500;
            font-size: 14px;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: all .15s ease;
        }

        .genreitem:hover {
            background: #e9f2ff;
            color: #0b63d1;
            transform: translateX(3px);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.15);
        }

        .genreitem.active {
            background: #0b63d1;
            color: #fff;
            box-shadow: 0 3px 10px rgba(11, 99, 209, .35);
        }

        /* Grid and card styles */
        .grid {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            gap: 16px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-radius: 16px;
            line-height: 1;
            margin: 8px;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 12px;
            transition: all 0.2s ease;
            overflow: hidden;
            height: 244px;
            width: 340px;
            font-family: 'Poppins', sans-serif !important;
        }

        .card:hover {
            cursor: pointer;
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .card img {
            width: 150px;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.18);
            margin: 12px;
            transition: transform .25s ease;
        }

        .card img:hover {
            transform: scale(1.02) rotate(2deg);
        }

        .details {
            display: none;
            flex-direction: column;
            flex: 1;
            padding: 12px;
            margin-left: 8px;
            border-left: 2px solid rgba(0, 0, 0, 0.08);
            gap: 6px;
            line-height: 1.2;
            background: linear-gradient(to right, rgba(255, 255, 255, 0.96), rgba(255, 255, 255, 0.88));
            border-radius: 0 16px 16px 0;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.02);
            height: 220px;
            justify-content: space-between;
        }

        .details .card-title {
            font-size: 18px;
            font-weight: 700;
            margin: 0 0 4px 0;
            letter-spacing: .2px;
        }

        .details p {
            font-size: 13px;
            margin: 2px 0;
            color: #333;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-genre {
            background: #eef6ff;
            color: #0b63d1;
            border: 1px solid rgba(11, 99, 209, .18);
        }

        .badge-rating {
            background: #fff7e6;
            color: #b36b00;
            border: 1px solid rgba(255, 165, 0, .2);
        }

        /* Buttons */
        .btn-primary { display: inline-block; background-color: #111; color: #fff; text-decoration: none; padding: 8px 16px; border-radius: 999px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); transition: all 0.2s ease; border: none; font-size: 13px; font-weight: 500; letter-spacing: 0.2px; white-space: nowrap; cursor: pointer; }
        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2); background-color: #000; }

        .btn-secondary { display: inline-block; margin-left: 4px; background-color: #111; color: #fff; border: 1px solid rgba(0, 0, 0, 0.15); text-decoration: none; padding: 8px 16px; border-radius: 999px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); transition: all 0.2s ease; font-size: 13px; font-weight: 500; letter-spacing: 0.2px; white-space: nowrap; cursor: pointer; }
        .btn-secondary:hover { transform: translateY(-2px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12); background-color: rgba(255, 255, 255, 0.95); border-color: rgba(0, 0, 0, 0.25); color: #000; }

        .details-actions {
            display: flex;
            gap: 8px;
            margin-top: 4px;
            padding-top: 4px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            flex-direction: row;
            align-items: center;
            justify-content: flex-start;
            flex-wrap: nowrap;
        }
        /* ====== Overrides to match browser.html layout ====== */
        .browse { display: grid; grid-template-columns: 280px 1fr; gap: 24px; max-width: 1400px; margin: 24px auto; padding: 0 16px; margin-top: 70px; }
        .results { display: grid; gap: 16px; }
        .toolbar { display: flex; justify-content: space-between; align-items: center; gap: 16px; padding: 8px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);width: 80%; }
        .toolbar-search { flex: 0 1 600px; max-width: 600px; width: 100%; height: 44px; min-height: 44px; padding: 10px 20px; border: 2px solid rgba(0, 0, 0, 0.08); border-radius: 999px; font-size: 15px; transition: all 0.2s ease; box-sizing: border-box; }
        .toolbar-search:focus { outline: none; border-color: rgba(0, 0, 0, 0.2); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); }
        .toolbar-actions { display: flex; gap: 12px; align-items: center; }
        .sort-select { padding: 10px 42px 10px 14px; border-radius: 12px; border: 1.5px solid #ddd; background: #fff; font-size: 15px; font-weight: 500; color: #222; cursor: pointer; outline: none; appearance: none; -webkit-appearance: none; -moz-appearance: none; transition: all 0.25s ease; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08); background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='11' stroke='%23000' fill='white'/><polyline points='8 10 12 14 16 10'/></svg>"); background-repeat: no-repeat; background-position: right 12px center; background-size: 22px; }
        .grid { padding-left: 6px; display: flex; flex-wrap: wrap; width: 90vw; border-left: 1px solid black; gap: 5px; }
        .card { height: 244px; border-radius: 16px; font-family: 'Poppins', sans-serif !important; }
        .card img { width: 150px; height: 220px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .details { display: none; animation: fadeIn .3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px);} to { opacity: 1; transform: translateX(0);} }

        @media (max-width: 900px) {
            .browse { grid-template-columns: 1fr; gap: 16px; }
            .grid { width: 100%; justify-content: center; }
            .card { width: calc(50% - 10px); min-width: 280px; }
            .card img { width: 120px; height: 160px; }
        }
        @media (max-width: 640px) {
            .toolbar-search { max-width: 100%; }
            .grid { display: block; width: 100%; padding-left: 0; border-left: none; }
            .card { width: 100%; max-width: 100%; margin: 5px 0; }
            .card img { width: 100px; height: 140px; margin-left: 15px !important; margin-right: 10px !important; }
            .details { padding: 6px 8px; display: flex !important; margin-left: 0% !important; margin: 0%; }
            .details .card-title { font-size: 16px; }
            .details p { font-size: 14px; }
            .details-actions { flex-direction: column; gap: 6px; }
            .btn-primary, .btn-secondary { width: 100%; margin: 0; text-align: center; }
        }
    </style>
</head>

<body>
    <header>
        <nav>
            <h1 class="logo"> <a href="index.html">BN</a></h1>
            <div class="navbar">
                <ul>
                    <li class="title">Book-Nest</li>
                </ul>
            </div>
            <div class="actions">
                <span class="material-symbols-outlined" aria-label="Search">search</span>
                <div style=" position: relative;">
                    <span class="material-symbols-outlined" aria-label="Cart"
                        onclick="window.location.href='cart.html'">shopping_cart</span>
                    <p id="cart-quantity"
                        style="position: absolute; top: 0; left: 32px; font-size: 10px;font-weight: bold;"></p>
                </div>
            </div>
        </nav>
    </header>

    <main class="browse">
        <aside class="filters">
                <div id="generslist"></div>
        </aside>
        <section class="results" aria-label="Results">
            <div class="toolbar">
                <input type="text" class="toolbar-search" placeholder="Search within selected genre..." aria-label="Search books" onkeyup="searchfun()" />
                <div class="toolbar-actions">
                    <select class="sort-select" aria-label="Sort by" id="sort" onchange="sortChange()">
                        <option value="" disabled selected>Sort</option>
                        <option value="rating-high">Rating (High to Low)</option>
                        <option value="rating-low">Rating (Low to High)</option>
                        <option value="price-low">Price (Low to High)</option>
                        <option value="price-high">Price (High to Low)</option>
                    </select>
                </div>
            </div>
                <div id="grid" class="grid"></div>
        </section>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                const cart = JSON.parse(savedCart);
                let cartquantity = 0;
                cart.forEach(item => { cartquantity += item.quantity; });
                document.querySelector("#cart-quantity").textContent = cartquantity;
            } else {
                document.querySelector("#cart-quantity").textContent = "0";
            }
        });

        const genresList = [
            "All", "Southern Gothic", "Coming-of-age", "Dystopian", "Political fiction", "Classic", "Tragedy", "Romance", "Adventure", "Historical", "Fantasy", "Epic", "Young Adult", "Philosophical", "Drama", "Science Fiction", "Psychological fiction", "Satire", "Gothic", "Thriller", "Mystery", "Children's Literature", "Magical Realism", "Literary Fiction", "Post-apocalyptic", "Speculative Fiction", "Psychological Thriller", "Space Opera", "Contemporary Fiction", "Memoir", "Biography", "Mythology", "Manga", "Action", "Dark Fantasy", "Superhero", "Action Comedy", "Horror", "Supernatural", "Sports", "Thriller", "Historical Fiction"
        ];

        const books = [
            { id: 1, title: "To Kill a Mockingbird", author: "Harper Lee", genres: ["Southern Gothic", "Coming-of-age"], priceUsd: 10.99, rating: 4.5, image: "https://m.media-amazon.com/images/I/81gepf1eMqL.jpg" },
            { id: 2, title: "1984", author: "George Orwell", genres: ["Dystopian", "Political fiction"], priceUsd: 9.99, rating: 4.5, image: "https://rukminim2.flixcart.com/image/704/844/xif0q/book/v/v/f/1984-original-imahc9p42zyurth5.jpeg?q=90&crop=false" },
            { id: 3, title: "The Great Gatsby", author: "F. Scott Fitzgerald", genres: ["Classic", "Tragedy"], priceUsd: 10.99, rating: 4.4, image: "https://m.media-amazon.com/images/I/71V1cA2fiZL._UF1000,1000_QL80_.jpg" },
            { id: 4, title: "Pride and Prejudice", author: "Jane Austen", genres: ["Romance", "Classic"], priceUsd: 8.99, rating: 4.5, image: "https://m.media-amazon.com/images/I/81Scutrtj4L._UF1000,1000_QL80_.jpg" },
            { id: 5, title: "The Catcher in the Rye", author: "J.D. Salinger", genres: ["Coming-of-age", "Classic"], priceUsd: 9.99, rating: 4.2, image: "https://m.media-amazon.com/images/I/7108sdEUEGL.jpg" },
            { id: 6, title: "Moby-Dick", author: "Herman Melville", genres: ["Adventure", "Classic"], priceUsd: 11.99, rating: 4.3, image: "https://m.media-amazon.com/images/I/71K4OH9CqOL._UF1000,1000_QL80_.jpg" },
            { id: 7, title: "War and Peace", author: "Leo Tolstoy", genres: ["Historical", "Classic"], priceUsd: 14.99, rating: 4.3, image: "https://cdn.kobo.com/book-images/3ac03eac-d437-47e3-9b15-52542edabd56/1200/1200/False/war-and-peace-34.jpg" },
            { id: 8, title: "The Lord of the Rings", author: "J.R.R. Tolkien", genres: ["Fantasy", "Epic"], priceUsd: 24.99, rating: 4.5, image: "https://m.media-amazon.com/images/I/7125+5E40JL._UF1000,1000_QL80_.jpg" },
            { id: 9, title: "Harry Potter and the Sorcerer's Stone", author: "J.K. Rowling", genres: ["Fantasy", "Young Adult"], priceUsd: 10.99, rating: 4.7, image: "https://m.media-amazon.com/images/I/81q77Q39nEL.jpg" },
            { id: 10, title: "The Alchemist", author: "Paulo Coelho", genres: ["Adventure", "Philosophical"], priceUsd: 12.99, rating: 4.6, image: "https://m.media-amazon.com/images/I/71aFt4+OTOL.jpg" }
        ];

        const glist = document.getElementById("generslist");
        const grid = document.getElementById("grid");

        function rendergeners(active = "All") {
            glist.innerHTML = "";
            genresList.forEach(item => {
                const genre = document.createElement("div");
                genre.className = "genreitem" + (item === active ? " active" : "");
                genre.innerHTML = `<p>${item}</p>`;
                genre.addEventListener("click", () => genersfun(item));
                glist.appendChild(genre);
            });
        }

        function renderBooks(list) {
            grid.innerHTML = "";
            if (!list || list.length === 0) {
                const empty = document.createElement('div');
                empty.style.padding = '16px';
                empty.style.color = '#666';
                empty.textContent = 'No books found for this genre.';
                grid.appendChild(empty);
                return;
            }
            list.forEach(book => {
                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                    <img src="${book.image}" alt="${book.title} cover" class="card-img" />
                    <div class="details">
                        <h3 class="card-title">${book.title}</h3>
                        <p class="rating"><strong>Rating</strong> ${book.rating}⭐</p>
                        <p><strong>By</strong> ${book.author}</p>
                        <p><strong>Genre</strong> ${book.genres && book.genres.length ? book.genres[0] : '—'}</p>
                        <p><strong>Price</strong> $${book.priceUsd}</p>
                        <div class="details-actions">
                            <button class="btn-primary btn-add-cart" type="button" onclick="addToCart(this)" data-book-id="${book.id}">Add to cart</button>
                            <button class="btn-secondary btn-view-more" type="button">View more</button>
                        </div>
                    </div>
                `;

                const img = card.querySelector('.card-img');
                const details = card.querySelector('.details');
                details.style.display = 'none';
                img.addEventListener('click', () => {
                    const allDetails = grid.querySelectorAll('.details');
                    allDetails.forEach(d => { if (d !== details) d.style.display = 'none'; });
                    details.style.display = details.style.display === 'flex' ? 'none' : 'flex';
                    if (details.style.display === 'flex') { details.style.flexDirection = 'column'; }
                });

                grid.appendChild(card);
            });
        }

        let activeGenre = 'All';
        function searchfun() {
            const term = document.querySelector('.toolbar-search')?.value.toLowerCase().trim() || '';
            const base = activeGenre === 'All' ? books : books.filter(book => book.genres.some(g => g.toLowerCase() === activeGenre.toLowerCase()));
            const filtered = base.filter(book => book.title.toLowerCase().includes(term) || book.author.toLowerCase().includes(term) || book.genres.some(g => g.toLowerCase().includes(term)));
            renderBooks(filtered);
        }

        function sortChange() {
            const sort = document.getElementById('sort').value;
            const base = activeGenre === 'All' ? [...books] : books.filter(book => book.genres.some(g => g.toLowerCase() === activeGenre.toLowerCase()));
            if (sort === 'rating-high') base.sort((a,b) => b.rating - a.rating);
            else if (sort === 'rating-low') base.sort((a,b) => a.rating - b.rating);
            else if (sort === 'price-high') base.sort((a,b) => b.priceUsd - a.priceUsd);
            else if (sort === 'price-low') base.sort((a,b) => a.priceUsd - b.priceUsd);
            renderBooks(base);
        }

        let cart = [];
        function addToCart(buttonElement) {
            const bookId = parseInt(buttonElement.dataset.bookId);
            let matchingbook;
            cart.forEach(item => { if (bookId === item.bookId) matchingbook = item; });
            if (matchingbook) { matchingbook.quantity += 1; }
            else {
                const book = books.find(b => b.id === bookId);
                cart.push({ bookId: bookId, bookname: book?.title || 'Book', quantity: 1 });
            }
            let cartquantity = 0; cart.forEach(item => { cartquantity += item.quantity; });
            document.querySelector("#cart-quantity").textContent = cartquantity;
            localStorage.setItem("cartquantity", cartquantity);
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function genersfun(item) {
            activeGenre = item || 'All';
            rendergeners(activeGenre);
            if (activeGenre === "All") { renderBooks(books); return; }
            const filtered = books.filter(book => book.genres.some(genre => genre.toLowerCase() === activeGenre.toLowerCase()));
            renderBooks(filtered);
        }

        document.addEventListener("DOMContentLoaded", () => {
            rendergeners("All");
            genersfun("All");
        });
    </script>
</body>

</html>