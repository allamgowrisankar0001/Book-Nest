<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Books • Book-Nest</title>
    <link rel="stylesheet" href="browse.css">
    <!-- <link rel="stylesheet" href="../Css/home.css"> -->
    <!-- <link rel="stylesheet" href="../Css/browser.css"> -->
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Ms+Madi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
</head>
<body>
    <header>
        <nav>
            <h1 class="logo"> <a href="index.html">BN</a></h1>
            <div class="navbar">
                <ul>
                    <li class="title">Book-Nest</li>
                </ul>
            </div>
            <div class="actions">
                <span class="material-symbols-outlined" aria-label="Search">search</span>
                <span class="material-symbols-outlined" aria-label="Cart">shopping_cart</span>
            </div>
        </nav>
    </header>

    <main class="browse">
        <aside class="filters" aria-label="Filters">
            <h2 class="filters-title">Filters</h2>
            <div class="filter-group">
                <label for="filter-search">Search</label>
                <input id="filter-search" type="text" placeholder="Search books..." />
            </div>
            <div class="filter-group">
                <label for="filter-genre">Genre</label>
                <select id="filter-genre">
                    <option value="">All genres</option>
                    <option>Fiction</option>
                    <option>Mystery</option>
                    <option>Fantasy</option>
                    <option>Romance</option>
                    <option>Non‑fiction</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filter-sort">Sort by</label>
                <select id="filter-sort">
                    <option value="popular">Most popular</option>
                    <option value="new">Newest</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                </select>
            </div>
            <div class="filter-group">
                <label class="checkbox">
                    <input type="checkbox" id="filter-available" />
                    <span>In stock only</span>
                </label>
            </div>
        </aside>

        <section class="results" aria-label="Results">
            <div class="toolbar">
                <input type="text" class="toolbar-search" placeholder="Search all books..." aria-label="Search all books" />
                <div class="toolbar-actions">
                    <button class="btn-primary" onclick="searchfun()"">Browse Books</button>
                    <button class="btn-secondary">Explore Genres</button>
                </div>
            </div>

            <div id="grid" class="grid">
               
            </div>
        </section>
    </main>

    <script src="../js/browse.js">
        const generateRandomRating = (min = 3.5, max = 5.0, step = 0.1) => {
    const steps = Math.floor((max - min) / step) + 1;
    const value = min + Math.floor(Math.random() * steps) * step;
    return Math.round(value * 10) / 10;
};

const books = [
    {
        title: "To Kill a Mockingbird",
        author: "Harper Lee",
        genres: ["Southern Gothic", "Coming-of-age"],
        priceUsd: 10.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/81gepf1eMqL.jpg"
    },
    {
        title: "1984",
        author: "George Orwell",
        genres: ["Dystopian", "Political fiction"],
        priceUsd: 9.99,
        rating: generateRandomRating(),
        image: "https://rukminim2.flixcart.com/image/704/844/xif0q/book/v/v/f/1984-original-imahc9p42zyurth5.jpeg?q=90&crop=false"
    },
    {
        title: "The Great Gatsby",
        author: "F. Scott Fitzgerald",
        genres: ["Classic", "Tragedy"],
        priceUsd: 10.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/71V1cA2fiZL._UF1000,1000_QL80_.jpg"
    },
    {
        title: "Pride and Prejudice",
        author: "Jane Austen",
        genres: ["Romance", "Classic"],
        priceUsd: 8.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/81Scutrtj4L._UF1000,1000_QL80_.jpg"
    },
    {
        title: "The Catcher in the Rye",
        author: "J.D. Salinger",
        genres: ["Coming-of-age", "Classic"],
        priceUsd: 9.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/7108sdEUEGL.jpg"
    },
    {
        title: "Moby-Dick",
        author: "Herman Melville",
        genres: ["Adventure", "Classic"],
        priceUsd: 11.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/71K4OH9CqOL._UF1000,1000_QL80_.jpg"
    },
    {
        title: "War and Peace",
        author: "Leo Tolstoy",
        genres: ["Historical", "Classic"],
        priceUsd: 14.99,
        rating: generateRandomRating(),
        image: "https://cdn.kobo.com/book-images/3ac03eac-d437-47e3-9b15-52542edabd56/1200/1200/False/war-and-peace-34.jpg"
    },
    {
        title: "The Lord of the Rings",
        author: "J.R.R. Tolkien",
        genres: ["Fantasy", "Epic"],
        priceUsd: 24.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/7125+5E40JL._UF1000,1000_QL80_.jpg"
    },
    {
        title: "Harry Potter and the Sorcerer’s Stone",
        author: "J.K. Rowling",
        genres: ["Fantasy", "Young Adult"],
        priceUsd: 10.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/81q77Q39nEL.jpg"
    },
    {
        title: "The Alchemist",
        author: "Paulo Coelho",
        genres: ["Adventure", "Philosophical"],
        priceUsd: 12.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/71aFt4+OTOL.jpg"
    },
    {
        title: "The Kite Runner",
        author: "Khaled Hosseini",
        genres: ["Historical", "Drama"],
        priceUsd: 11.99,
        rating: generateRandomRating(),
        image: "https://m.media-amazon.com/images/I/617lxveUjYL._UF894,1000_QL80_.jpg"
    },
    {
        title: "The Hunger Games",
        author: "Suzanne Collins",
        genres: ["Dystopian", "Young Adult"],
        priceUsd: 10.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-The%20Hunger%20Games/400/600"
    },
    {
        title: "The Book Thief",
        author: "Markus Zusak",
        genres: ["Historical", "Young Adult"],
        priceUsd: 12.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-The%20Book%20Thief/400/600"
    },
    {
        title: "Brave New World",
        author: "Aldous Huxley",
        genres: ["Dystopian", "Science Fiction"],
        priceUsd: 10.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-Brave%20New%20World/400/600"
    },
    {
        title: "Crime and Punishment",
        author: "Fyodor Dostoevsky",
        genres: ["Psychological fiction", "Classic"],
        priceUsd: 12.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-Crime%20and%20Punishment/400/600"
    },
    {
        title: "Don Quixote",
        author: "Miguel de Cervantes",
        genres: ["Satire", "Adventure"],
        priceUsd: 13.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-Don%20Quixote/400/600"
    },
    {
        title: "Jane Eyre",
        author: "Charlotte Brontë",
        genres: ["Gothic", "Romance"],
        priceUsd: 9.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-Jane%20Eyre/400/600"
    },
    {
        title: "Wuthering Heights",
        author: "Emily Brontë",
        genres: ["Gothic", "Romance"],
        priceUsd: 9.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-Wuthering%20Heights/400/600"
    },
    {
        title: "The Da Vinci Code",
        author: "Dan Brown",
        genres: ["Thriller", "Mystery"],
        priceUsd: 9.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-The%20Da%20Vinci%20Code/400/600"
    },
    {
        title: "Life of Pi",
        author: "Yann Martel",
        genres: ["Adventure", "Philosophical"],
        priceUsd: 11.99,
        rating: generateRandomRating(),
        image: "https://picsum.photos/seed/book-Life%20of%20Pi/400/600"
    }
];



const renderBooks = (list = books) => {
    const container = document.getElementById("grid");
    if (!container) return;

    container.innerHTML = "";

    list.forEach(book => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
        <img src="${book.image}" alt="${book.title} cover" class="card-img"  />
        <div class="details" id="card-details">
        <h3 class="card-title">${book.title}</h3>
        <p><strong>Author:</strong> ${book.author}</p>
        <p class="rating"><strong>Rating:</strong> ${book.rating} ⭐</p>
        <p><strong>Price:</strong> $${book.priceUsd}</p>
        <div class="details-actions">
            <button class="btn-primary btn-add-cart" type="button" id="addtocart">Add to cart</button>
            <button class="btn-secondary btn-view-more" type="button">View more</button>
        </div>
        </div>
      `;
      const img = card.querySelector(".card-img");
        const details = card.querySelector(".details");
        // ensure hidden by default
        details.style.display = "none";

        // toggle details on image click
        img.addEventListener("click", () => {
            // hide all other open details
            const containerEl = document.getElementById("grid");
            const allDetails = containerEl.querySelectorAll(".details");
            allDetails.forEach(d => { if (d !== details) d.style.display = "none"; });

            // toggle current

            if (details.style.display === "flex") {
                details.style.display = "none";
            } else {
                details.style.display = "flex";
                details.style.flexDirection = "column"; 
            }
        });
      
        container.appendChild(card);
    });
};
document.addEventListener("DOMContentLoaded", renderBooks());
function searchfun() {
    const searchInput = document.querySelector(".toolbar-search").value.toLowerCase().trim();

    const filteredBooks = books.filter(book => 
        book.title.toLowerCase().includes(searchInput) ||
        book.author.toLowerCase().includes(searchInput) ||
        book.genres.some(genre => genre.toLowerCase().includes(searchInput))
    );
    console.log(filteredBooks)
    renderBooks(filteredBooks);
        }
    </script>
</body>
</html>
